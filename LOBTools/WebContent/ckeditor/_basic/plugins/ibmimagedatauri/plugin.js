CKEDITOR.plugins.add("ibmimagedatauri",{lang:"ar,ca,cs,da,de,el,en,es,fi,fr,he,hr,hu,it,iw,ja,kk,ko,nb,nl,no,pl,pt,pt-br,ro,ru,sk,sl,sv,th,tr,uk,zh,zh-cn,zh-tw",init:function(c){c.config.ibmFilterPastedDataUriImage&&(c.on("paste",function(b){var a=/<img.*src=["']data:image\/[^>]*>/gi,d=b.data.dataValue;if(a.test(d)){for(var a=d.match(a),e=0;e<a.length;e++)d=d.replace(a[e],"");alert(c.lang.ibmimagedatauri.error);b.data.dataValue=d}}),c.on("contentDom",function(){c.document.on("drop",function(b){if(0<
b.data.$.dataTransfer.files.length)alert(c.lang.ibmimagedatauri.error),b.data.$.preventDefault();else{var a=CKEDITOR.env.ie?"url":"text/html",a=CKEDITOR.env.ie?'<img src="'+b.data.$.dataTransfer.getData(a)+'">':b.data.$.dataTransfer.getData(a);CKEDITOR.env.mac&&/\S/.test(b.data.$.dataTransfer.getData("url"))&&(a='<img src="'+b.data.$.dataTransfer.getData("url")+'">');/<img.*src=["']data:image\/[^>]*>/gi.test(a)&&(alert(c.lang.ibmimagedatauri.error),b.data.$.preventDefault())}})}))}});