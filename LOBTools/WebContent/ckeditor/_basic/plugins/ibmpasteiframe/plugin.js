CKEDITOR.plugins.add("ibmpasteiframe",{init:function(f){function g(b){var a=b,d=CKEDITOR.env.ie?/&lt;iframe.+&lt;\/iframe/:/&lt;iframe.+&lt;\/iframe&gt;/;this.parse=function(){if(!d.test(a))return!1;CKEDITOR.env.ie&&(a=a.replace(/(?:<A\s+href=(['"]).+?\1\s*>)(.+?)(?:<\/A>)/gi,"$2"));a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">");return!0};this.createPlaceholderImage=function(b){var d=new CKEDITOR.dom.element("div",b.document);d.setHtml(a);for(var e=[],c=0;c<d.getChildCount();c++)e.push(d.getChild(c));
c=/<iframe.+?\s*.*<\/iframe>/i.exec(a);c=CKEDITOR.dom.element.createFromHtml(c,b.document);b=b.createFakeElement(c,"cke_iframe","iframe",!0);b.setStyles({width:c.getAttribute("width")+"px",height:c.getAttribute("height")+"px"});for(c=0;c<e.length;c++)e[c].getName&&"iframe"==e[c].getName()&&e.splice(c,1,b);return e}}f.on("paste",function(b){var a=new g(b.data.dataValue);if("html"==b.data.type&&a.parse()){for(var a=a.createPlaceholderImage(b.editor),d=0;d<a.length;d++)a[d].type==CKEDITOR.NODE_ELEMENT?
b.editor.insertElement(a[d]):a[d].type==CKEDITOR.NODE_TEXT&&b.editor.insertText(a[d].getText());b.cancel()}})}});