(function(){var b=function(){var a=null,g=/NDL.+REPLICA.+/,c,d=null,e=null,f=null;return{HTML_CLEANSING_NOTESLINKONLY_REGEXP:/^(<\!--.*--\>)?(&nbsp;)?(\s*<table[^<]*>\s*<tbody>\s*<\/tbody>\s*<\/table>\s*)?(\s*<a\s*href="Notes:\/\/.*">)((?!(<eom><\/eom>)).*?)(<eom><\/eom>)?(<\/a>\s*){1}(\s*<table[^<]*>\s*<tbody>\s*<\/tbody>\s*<\/table>\s*)?$/gi,HTML_NO_CLEASING_NOTESLINKONLY_REGEXP:/^(<\!--.*--\>)?(&nbsp;)?(\s*<table[^<]*>\s*<tbody>\s*)(<tr>\s*)?(<td>\s*)?(\s*<a\s*href="Notes:\/\/.*">)((?!(<eom><\/eom>)).*?)(<eom><\/eom>)?(<\/a>\s*){1}(\s*<\/td>)?(\s*<\/tr>)?(\s*<\/tbody>\s*<\/table>\s*)$/gi,
parse:function(b){a=null;if(!g.test(b))return!1;null===d&&(d=RegExp("(.+[^<])<.+&lt;NDL&gt;.*REPLICA\\s([0-9A-F]{8}):([0-9A-F]{8}).+VIEW OF([0-9A-F]{8}):([0-9A-F]{8})-ON([0-9A-F]{8}):([0-9A-F]{8}).+NOTE OF([0-9A-F]{8}):([0-9A-F]{8})-ON([0-9A-F]{8}):([0-9A-F]{8})(.+HINT&gt;CN=(\\w+)\\/)?"));null===e&&(e=RegExp("(.+[^<])<.+&lt;NDL&gt;.*REPLICA\\s([0-9A-F]{8}):([0-9A-F]{8}).+VIEW OF([0-9A-F]{8}):([0-9A-F]{8})-ON([0-9A-F]{8}):([0-9A-F]{8})(.+HINT&gt;CN=(\\w+)\\/)?"));null===f&&(f=/(.+[^<])<.+&lt;NDL&gt;.*REPLICA\s([0-9A-F]{8}):([0-9A-F]{8})(.+HINT&gt;CN=(\w+)\/)?/);
if(!d.test(b)&&!e.test(b)&&!f.test(b))return!1;d.test(b)?(c=0,a=d.exec(b)):e.test(b)?(c=1,a=e.exec(b)):f.test(b)&&(c=2,a=f.exec(b));return null!==a},createLink:function(){var a;0==c?a='<a href="Notes://'+b.getServer()+"/"+b.getReplica()+"/"+b.getView()+"/"+b.getNote()+'">'+b.getName()+"</a>":1==c?a='<a href="Notes://'+b.getServer()+"/"+b.getReplica()+"/"+b.getView()+'">'+b.getName()+"</a>":2==c&&(a='<a href="Notes://'+b.getServer()+"/"+b.getReplica()+'">'+b.getName()+"</a>");return a},getReplica:function(){return a[2]+
a[3]},getName:function(){return a[1].replace(/&nbsp;/g,"").replace(/^\s+|\s+$/g,"")},getView:function(){return a[4]+a[5]+a[6]+a[7]},getNote:function(){return a[8]+a[9]+a[10]+a[11]},getServer:function(){if(0==c)return void 0===a[13]?"":a[13];if(1==c)return void 0===a[9]?"":a[9];if(2==c)return void 0===a[5]?"":a[5]}}}();CKEDITOR.plugins.add("ibmpastenotesdatalink",{init:function(a){a.on("paste",function(a){a=a.data;if("html"==a.type){var c=a.dataValue;b.parse(c)?a.dataValue=b.createLink(c):c.match(b.HTML_CLEANSING_NOTESLINKONLY_REGEXP)?
(b.HTML_CLEANSING_NOTESLINKONLY_REGEXP.lastIndex=0,c=b.HTML_CLEANSING_NOTESLINKONLY_REGEXP.exec(c),a.dataValue=("undefined"!==typeof c[4]?c[4]:"")+("undefined"!==typeof c[5]?c[5]:"")+("undefined"!==typeof c[8]?c[8]:"")):c.match(b.HTML_NO_CLEASING_NOTESLINKONLY_REGEXP)?(b.HTML_NO_CLEASING_NOTESLINKONLY_REGEXP.lastIndex=0,c=b.HTML_NO_CLEASING_NOTESLINKONLY_REGEXP.exec(c),a.dataValue=("undefined"!==typeof c[6]?c[6]:"")+("undefined"!==typeof c[7]?c[7]:"")+("undefined"!==typeof c[10]?c[10]:"")):a.dataValue=
c}})},linkParser:b})})();