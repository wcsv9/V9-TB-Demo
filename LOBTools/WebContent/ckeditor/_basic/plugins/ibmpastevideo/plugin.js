CKEDITOR.plugins.add("ibmpastevideo",{init:function(l){function m(f){var a=f,h=/&lt;object.+&lt;param name=['"]?movie['"]?.+?&lt;embed.+type=['"]?application\/x-shockwave-flash.+?&lt;\/object&gt;\s*/i,j=/&lt;object.+\s*.*data=.+\s*.*type=['"]?application\/x-shockwave-flash.+?\s*.*&lt;\/object&gt;\s*/i,k,g;this.parse=function(){k=!1;if(!h.test(a)&&!j.test(a))return!1;a=a.replace(/&lt;!--.+?(--&gt;)/gi,"");if(CKEDITOR.env.ie)if(h.test(a)){this.isolateObjectFormatMetaData(h);a=a.replace(/(<A\s+href=['"].+?['"][^>]*>)/gi,
"");a=a.replace(/(<\/A>)/gi,"");CKEDITOR.env.ie&&8<CKEDITOR.env.version&&(a=a.replace(/(<\embed\'>)/i,"").replace(/(<\param\'>)/i,""));var b=document.createElement("div");b.style.display="none";document.body.appendChild(b);b.innerHTML=a;a="";for(var c=0;c<b.childNodes.length;c++)b.childNodes[c].nodeValue&&null!=b.childNodes[c].nodeValue&&(a+=b.childNodes[c].nodeValue);document.body.removeChild(b)}else j.test(a)&&(k=!0,this.isolateObjectFormatMetaData(j),a=a.replace(/(<A\s+href=['"]\s*)(.+?)(?:['"]\s*>.+?<\/A>)/gi,
"$2"),a=a.replace(/<A\s+href=['"]\s*.+?>/gi,""),a=a.replace(/<\/A>/gi,""));a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">");b=document.createElement("div");b.style.display="none";document.body.appendChild(b);b.innerHTML=a;var e=b.innerHTML;if(CKEDITOR.env.ie&&k){for(var d=b.firstChild,f="",i="",c=0;c<d.childNodes.length;c++)i=d.childNodes[c],i.tagName&&"param"==i.tagName.toLowerCase()&&(f+=i.outerHTML);e=e.substring(0,e.indexOf(">")+1)+f+e.substring(e.indexOf(">")+1,e.length)}document.body.removeChild(b);
a=e;a=a.replace(/<object/gi,"<cke:object").replace(/<\/object>/gi,"</cke:object>");a=a.replace(/<param/gi,"<cke:param").replace(/<\/param>/gi,"</cke:param>");a=a.replace(/<embed/gi,"<cke:embed").replace(/<\/embed>/gi,"</cke:embed>");if(b=a.match(RegExp("<cke:param[^>]*>(?!</cke:param>)","gi")))for(c=0;c<b.length;c++)e=b[c],b[c]=b[c].replace(/>/,"></cke:param>"),a=a.replace(e,b[c]);g&&(a=g.replace("OBJECT_PLACEHOLDER",a));return!0};this.createPlaceholderImage=function(b){var c=new CKEDITOR.dom.element("div",
b.document);c.setHtml(a);for(var e=[],d=0;d<c.getChildCount();d++)e.push(c.getChild(d));d=/<cke:object.+?\s*.*<\/cke:object>/i.exec(a);d=CKEDITOR.dom.element.createFromHtml(d,b.document);b=b.createFakeElement(d,"cke_flash","flash",!0);c=d.getAttribute("width");null!=c&&b.setStyle("width",c+"px");d=d.getAttribute("height");null!=d&&b.setStyle("height",d+"px");for(d=0;d<e.length;d++)e[d].getName&&"cke:object"==e[d].getName()&&e.splice(d,1,b);return e};this.isolateObjectFormatMetaData=function(b){b=
b.exec(a);g=a.replace(b,"OBJECT_PLACEHOLDER");g=g.replace(/(<A\s+href=['"].+?['"].+?['"]>)/gi,"");g=g.replace(/(<A\s+href=['"].+?['"]>)/gi,"");g=g.replace(/(<\/A>)/gi,"");g=g.replace(/&lt;/g,"<").replace(/&gt;/g,">");a=b[0]}}l.on("paste",function(f){var a=new m(f.data.dataValue);if("html"==f.data.type&&a.parse()){for(var a=a.createPlaceholderImage(f.editor),h=0;h<a.length;h++)a[h].type==CKEDITOR.NODE_ELEMENT?f.editor.insertElement(a[h]):a[h].type==CKEDITOR.NODE_TEXT&&f.editor.insertText(a[h].getText());
f.cancel()}})}});